---
- summary: |
    Проверка успешной регистрации пользователя
  requirement: |
    Пользователь должен иметь возможность зарегистрироваться на сайте
  prerequisites: |
    Открыта страница регистрации
  test-data: |
    Никнейм = fraythe
    Email = joohndee@mail.ru
    Пароль = 1234567
  steps:
    - Вводим никнейм
    - Вводим email
    - Вводим пароль
    - Повторяем пароль
    - Нажимаем кнопку «Submit»
  expected-result: |
    Пользователь должен попасть на страницу лобби

- summary: |
    Проверка регистрации пользователя с уже используемым никнеймом
  requirement: |
    Пользователь не должен иметь возможность ввести никнейм, который уже занят
  prerequisites: |
    Открыта страница регистрации
  test-data: |
    Никнейм = fraythe
    Email = joohnee@mail.ru
    Пароль = 1234567
  steps:
    - Вводим никнейм
    - Вводим email
    - Вводим пароль
    - Повторяем пароль
    - Нажимаем кнопку «Submit»
  expected-result: |
    Появляется сообщение, что никнейм уже используется

- summary: |
    Проверка регистрации пользователя с уже используемой почтой
  requirement: |
    Пользователь не должен иметь возможность ввести почту, которая уже занята
  prerequisites: |
    Открыта страница регистрации
  test-data: |
    Никнейм = frayth
    Email = joohndee@mail.ru
    Пароль = 1234567
  steps:
    - Вводим никнейм
    - Вводим email
    - Вводим пароль
    - Повторяем пароль
    - Нажимаем кнопку «Submit»
  expected-result: |
    Появляется сообщение, что почта уже используется

- summary: |
    Проверка регистрации пользователя с невалидным email
  requirement: |
    Пользователь не должен иметь возможность ввести невалидный email
  prerequisites: |
    Открыта страница регистрации
  test-data: |
    Никнейм = fraythe
    Пароль = 1234567
  steps:
    - Вводим никнейм
    - Вводим пароль
    - Повторяем пароль
    - Вводим в email "joohndee"
    - Дописываем в email "@"
    - Дописываем в email "mail"
    - Дописываем в email "."
    - Дописываем в email "r"
    - Дописываем в email "u"
    - Нажимаем кнопку «Submit»
  expected-result: |
    До последнего шага должно быть написано "Invalid email"

- summary: |
    Проверка авторизации пользователя с помощью аккаунта на Github
  requirement: |
    Пользователь должен иметь возможность авторизоваться на сайте с помощью аккаунта на Github
  prerequisites: |
    Открыта страница входа
    Аккаунт на Github создан и авторизован
  test-data: |
    empty
  steps:
    - Нажимаем кнопку "Sign In with GitHub"
  expected-result: |
    Пользователь должен попасть на страницу лобби с сообщением "Successfully authenticated" и авторизоваться

- summary: |
    Проверка авторизации пользователя с помощью аккаунта на Discord
  requirement: |
    Пользователь должен иметь возможность авторизоваться на сайте с помощью аккаунта на Discord
  prerequisites: |
    Открыта страница входа
    Аккаунт на Discord создан и авторизован
  test-data: |
    empty
  steps:
    - Нажимаем кнопку "Sign In with Discord"
  expected-result: |
    Пользователь должен попасть на страницу лобби с сообщением "Successfully authenticated" и авторизоваться

- summary: |
    Проверка входа пользователя с незарегистрированным email
  requirement: |
    При неправильном email или пароле пользователь должен получить сообщение об ошибке
  prerequisites:
    Открыта страница входа
  test-data: |
    Email = hmmm@mail.ru Пароль = 123456
  steps:
    - Вводим email
    - Вводим пароль
    - Нажимаем кнопку «Submit»
  expected-result: |
    Появляется сообщение EMAIL_NOT_FOUND

- summary: |
    Проверка создания игры с ботом
  requirement: |
    Пользователь должен иметь возможность выбора соперника (с ботом)
  prerequisites: |
    Открыта главная страница сайта
  test-data: |
    empty
  steps:
    - Нажать на кнопку "Create a game"
    - Нажать на кнопку "With a bot"
    - Нажать на кнопку "Create battle"
  expected-result: |   
    Отображается страница игры с ботом

- summary: |
    Проверка создания игры с другом
  requirement: |
    Пользователь должен иметь возможность выбора соперника (с другом)
  prerequisites: |
    Открыта главная страница сайта
  test-data: |
    empty
  steps:
    - Нажать на кнопку "Create a game"
    - Нажать на кнопку "With a friend"
    - В строке Choose opponent вводим никнейм другого пользователя
    - Нажать на кнопку "Create battle"
  expected-result: |   
    Отображается страница игры с выбранным пользоваталем 

- summary: |
    Проверка создания игры с любым человеком
  requirement: |
    Пользователь должен иметь возможность выбора соперника (с любым человеком)
  prerequisites: |
    Открыта главная страница сайта
  test-data: |
    empty
  steps:
    - Нажать на кнопку "Create a game"
    - Нажать на кнопку "With other user"
    - Нажать на кнопку "Create battle"
  expected-result: |   
    Отображается страница лобби с возможными соперниками

- summary: |
    Проверка выбора игры по уровню сложности
  requirement: |
    Пользователь должен иметь возможность выбора игры по уровню сложности
  prerequisites: |
    Открыта главная страница сайта
  test-data: |
    empty
  steps:
    - Нажать на кнопку "Create a game"
    - В пункте "Level" выбрать 2 звезды
    - Нажать на кнопку "With a bot"
    - С помощью ползунка выбрать время 20 минут
    - С помощью выпадающего списка "Choose task" выбрать задание
    - Нажать на кнопку "Create battle"
  expected-result: |  
    Отображается страница выбранной игры с ботом с установленными параметрами

- summary: |
    Проверка возможности видеть решение соперника в реальном времени
  requirement: |
    Пользователь должен иметь возможность видеть решение соперника в реальном времени
  prerequisites: |
    Открыта страница игры
  test-data: |
    empty
  steps:
    empty
  expected-result: |  
    Пользователь видит решение соперника в реальном времени

- summary: |
    Проверка возможности выбора языка программирования для решения
  requirement: |
    Пользователь должен иметь возможность менять язык программировния во время решения
  prerequisites:
    Открыта главная страница сайта
  test-data: |
    empty
  steps:
    - Нажать на "Create a game"
    - Выставить параметры сложности
    - Нажать "Create battle"
    - Нажать на список языков программирования
  expected-result: |
    Пользователь может выбрать язык программирования

- summary: |
    Проверка возможности переключить задачу на русский язык
  requirement: |
    Пользователь должен иметь возможность переключить задачу на русский язык
  prerequisites:
    Открыта главная страница сайта
  test-data: |
    empty
  steps:
    - Нажать на "Create a game"
    - Выставить параметры сложности
    - Нажать "Create battle"
    - Нажать "EN"
    - В выпадающем списке нажать "RU"
  expected-result: |
    Задача отображается на русском языке

- summary: |
    Проверка возможности переключить задачу на английский язык
  requirement: |
    Пользователь должен иметь возможность переключить задачу на английский язык
  prerequisites:
    Открыта главная страница сайта
  test-data: |
    empty
  steps:
    - Нажать на "Create a game"
    - Выставить параметры сложности
    - Нажать "Create battle"
    - Нажать "RU"
    - В выпадающем списке нажать "EN"
  expected-result: |
    Задача отображается на английском языке

- summary: |
    Проверка просмотра игры других пользователей
  requirement: |
    Другие пользователи должны иметь возможность следить за ходом игры
  prerequisites: |
    Открыта главная страница сайта
  test-data: |
    empty
  steps:
    - Выбрать вкладку "Lobby"
    - Нажать на кнопку "Show" напротив лобби
  expected-result: |  
    Отображается страница игры между двумя пользователями

- summary: |
    Проверка возможности общаться в чате игры (пользователь авторизован)
  requirement: |
    Зарегистрированные пользователи должны иметь возможность общаться в чате игры
  prerequisites: |
    Открыта главная страница сайта
    Пользователь авторизован
  test-data: |
    empty
  steps:
    - Выбрать вкладку "Lobby"
    - Нажать на кнопку "Show" напротив лобби
    - В поле ввода написать сообщение
    - Нажать на кнопку "Send"
  expected-result: |  
    Отображаются введенные сообщения в чате игры

- summary: |
    Проверка возможности общаться в чате игры (пользователь не авторизован)
  requirement: |
    Незарегистрированные пользователи не должны иметь возможность общаться в чате игры
  prerequisites: |
    Открыта главная страница сайта
    Пользователь не авторизован
  test-data: |
    empty
  steps:
    - Выбрать вкладку "Lobby"
    - Нажать на кнопку "Show" напротив лобби
    - В поле ввода написать сообщение
    - Нажать на кнопку "Send"
  expected-result: |  
    Неавторизованный пользователь не может отправлять сообщения в чат игры

- summary: |
    Проверка просмотра записи завершенной игры
  requirement: |
    Пользователь должен иметь возможность посмотреть запись завершенной игры
  prerequisites: |
    Открыта главная страница сайта
  test-data: |
    empty
  steps:
    - Нажать на никнейм пользователя в правом верхнем углу
    - Нажать на кнопку "My Profile"
    - Нажать на кнопку "Completed games"
    - Нажать на кнопку "Show" у игры
  expected-result: |  
    Отображается страница завершенной игры с видеозаписью

- summary: |
    Проверка рейтинга игроков
  requirement: |
    Пользователи получают очки, на основе которых строится рейтинг за неделю, месяц и за все время
  prerequisites: |
    Открыта главная страница сайта
  test-data: |
    empty
  steps:
    - Нажать на кнопку "TOP list" в таблице лидеров
  expected-result: |  
    Отображены очки пользователей и их текущий ранг

- summary: |
    Проверка скорости загрузки сайта
  requirement: |
    Сайт нужно оптимизировать для скорости работы
  prerequisites:
    Открыта главная страница сайта и открыт DevTools, вкладка Network
  test-data: |
    empty
  steps:
    - Выбираем низкую скорость соединения
  expected-result: |
    Страница отображает текст еще до загрузки изображений или видео
    Никакой из компонентов страницы не ругается на отсутствие соединения, если оно есть
    Отсутствуют ошибки в JavaScript, которые не появляются при обычном соединении

- summary: |
    Проверка передачи данных на сайте
  requirement: |
    Должны уходить все запросы и приходить ответы без ошибок
  prerequisites:
    Открыта главная страница сайта, открыт DevTools
  test-data: |
    empty
  steps:
    - Нажимаем "Network"
    - Обновляем страницу
  expected-result: |
    Ошибок не должно быть, запросы должны отдавать статус 200

- summary: |
    Проверка адаптивности сайта
  requirement: |
    Сайт должен иметь мобильную версию
  prerequisites:
    Открыта главная страница сайта и открыт DevTools, меню адаптивности
  test-data: |
    Устройство iPhone SE
    Устройство iPhone 12 Pro
    Устройство Samsung Galaxy S8+
    Устройство Surface Pro 7
    Устройство Pixel 7
  steps:
    - Нажимаем на вкладку "Lobby"
    - Нажимаем на кнопку "Show"
    - Нажимаем на значок Codebattle в левом верхнем углу
    - В нижней части сайта на блоке "LEADERBOARD" нажать на "Month"
    - В нижней части сайта на блоке "LEADERBOARD" нажать на "All"
    - В нижней части сайта на блоке "LEADERBOARD" нажать на "Week"
    - В нижней части сайта на блоке "LEADERBOARD" нажать на "TOP List"
    - Нажимаем на значок Codebattle в левом верхнем углу
    - Нажимаем на "≡" в шапке сайта
    - Нажимаем на свой никнейм
    - Нажимаем "My Profile"
    - Нажимаем на значок Codebattle в левом верхнем углу
    - Нажимаем "Create a game"
    - Выбираем Level = 1, Game type = with a bot, time control = 10min, task = random task
    - Нажимаем "Create Battle"
    - Меняем язык задачи на RU
    - Меняем язык программирования на Ruby 3.3.0
    - Нажимаем на терминал и начинаем вводить код
    - Нажимаем "Press check solution or press give up"
  expected-result: |
    Все страницы корректно отображаются, функционал не меняется

- summary: |
    Проверка кроссбраузерности сайта
  requirement: |
    Сайт нужно протестировать на совместимость с последними версиями браузеров
  prerequisites:
    empty
  test-data: |
    Google Chrome
    Safari
    Firefox
  steps:
    - Открываем главную страницу сайта
    - Нажимаем на вкладку "Lobby"
    - Нажимаем на кнопку "Show"
    - Нажимаем на значок Codebattle в левом верхнем углу
    - В правой части сайта на блоке "LEADERBOARD" нажать на "Month"
    - В правой части сайта на блоке "LEADERBOARD" нажать на "All"
    - В правой части сайта на блоке "LEADERBOARD" нажать на "Week"
    - В правой части сайта на блоке "LEADERBOARD" нажать на "TOP List"
    - Нажимаем на значок Codebattle в левом верхнем углу
    - Нажимаем на "≡" в шапке сайта
    - Нажимаем на свой никнейм
    - Нажимаем "My Profile"
    - Нажимаем на значок Codebattle в левом верхнем углу
    - Нажимаем "Create a game"
    - Выбираем Level = 1, Game type = with a bot, time control = 10min, task = random task
    - Нажимаем "Create Battle"
    - Меняем язык задачи на RU
    - Меняем язык программирования на Ruby 3.3.0
    - Нажимаем на терминал и начинаем вводить код
    - Нажимаем "Press check solution or press give up"
  expected-result: |
    Сайт одинаково отображается и работает в разных браузерах

- summary: |
    Проверка возможности писать и изменять код соперника
  requirement: |
    Пользователь не должен иметь возможность писать и изменять код соперника
  prerequisites:
    Открыта главная страница сайта
  test-data: |
    empty
  steps:
    - Выбрать вкладку "Lobby"
    - Напротив открытого лобби нажать "Fight"
    - Навести курсор и нажать в любом месте в терминале соперника 
    - Начать вводить "123456"
  expected-result: |
    Ничего не должно произойти. Вводимые символы не должны вписываться в терминале соперника
